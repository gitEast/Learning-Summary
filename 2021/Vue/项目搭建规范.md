<!--
 * @Author: East Wind
 * @Date: 2021-07-28 20:56:58
 * @LastEditTime: 2021-07-28 23:54:14
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \Learning-Summary\2021\Vue\项目搭建规范.md
-->

# 项目搭建规范

## 一、代码规范

### 1.1 集成 editorconfig 配置

> Editorconfig 有助于为不同 IDE 编辑器上处理同一项目的多个开发人员维护一致的**代码风格**

参考 Vue

```.editorconfig
# https://editorconfig.org

root = true

[*] # 表示所有文件适用
charset = utf-8 # 设置文件的字符集
indent_style = space # 缩进风格
indent_size = 2 # 缩进大小
end_of_line = lf # 控制换行的类型( lf | cr | crlf )
insert_final_newline = true # 始终在文件末尾插入一个空行
trim_trailing_whitespace = true # 去除行首的任意空白字符

[*.md] # 表示仅 md 文件适用以下规则
insert_final_newline = false
trim_trailing_whitespace = false
```

VSCode 需要安装一个插件：`EditorConfig for VSCode`
[!EditorConfig for VS Code](./img/项目搭建规范/editorconfig.png)

### 1.2 使用 prettier 工具

> Prettier 是一款强大的代码格式化工具。

1. 安装 prettier：`npm install prettier -D`
2. 配置 `.prettierrc` 文件
   ```json
   {
     "useTabs": false, # 使用 tab 缩进还是空格缩进，选择false
     "tabWidth": 2, # 当 tab 是空格的情况下，是几个空格
     "printWidth": 80, # 当行字符的长度
     "singleQuote": true, # 使用单引号还是双引号，true为单引号
     "trailingComma": "none", # 在多行输入的尾逗号是否添加，设置为none不添加
     "semi": false # 语句末尾是否加分号，默认true，false不加
   }
   ```
3. 创建 `.prettierignore` 文件

   ```.prettierignore
   /dist/*
   .local
   .output.js
   /node_modules/**

   **/*.svg
   **/*.sh

   /public/*
   ```

4. 安装 prettier 插件[!prettier](./img/项目搭建规范/prettier.png)
5. 在 package.json 文件的 script 部分中添加脚本：`"prettier": "prettier --write ."`
6. `npm run prettier` 即可

### 1.3 解决 eslint 和 prettier 冲突

1. 在前面创建项目的时候，选择了 ESLint ，所以 Vue 会默认配置需要的 ESLint 环境
2. VS Code 需要安装 ESLint 插件
3. `npm install eslint-plugin-prettier eslint-config-prettier -D`(实际上不需要安装，在一开始的设置中 eslint + prettier 时就会设置安装)
4. 在 .eslintrc.js 文件中添加配置
   ```javascript
   module.exports = {
     ...,
     extends: [
       ...,
       'plugin:prettier/recommended'
     ]
   }
   ```

### 1.4 git Husky 和 eslint

> 虽然已经要求项目使用 eslint 了，但是不能保证其他人提交代码之前都将 eslint 中的问题解决了

- 即 我们希望保证代码仓库中的代码都是符合 eslint 规范的
- 那么需要在其他人执行`git commit`命令的时候对其进行校验，如果不符合 eslint 规范，那么自动通过规范来进行修复
- Husky：一个 git hook 工具，可以触发 git 提交的各个阶段：pre-commit, commit-msg, pre-push
  - 自动配置命令：`npx husky-init && npm install`
    - 安装 husky 相关依赖：package.json 中`"husky": "版本号"`
    - 在项目目录下创建 .husky 文件夹
  - 修改
